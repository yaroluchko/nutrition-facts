<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <style>
      :root {
        --color: white;
        --bg-color: red;
      }
      article {
        display: block;
        border: 1px solid black;
        padding: 10px;
        width: 250px;
        height: 300px;
        box-sizing: border-box;
        background-color: var(--bg-color);
        color: var(--color);
      }
      .title {
        font-weight: bold;
        font-size: 1.2em;
      }
      .serving {
        font-weight: bold;
        font-size: 1em;
      }

      table {
        width: 100%;
        border-top: 2px solid var(--color);
      }

      table:nth-child(even) {
        border-bottom: 2px solid var(--color);
        margin-bottom: 18px;
      }

      th {
        text-align: left;
      }

      tr {
        margin-top: 3px;
      }

      tr > td {
        text-align: left;
      }
      tr > td:last-child {
        text-align: right;
      }
      .grams {
        font-size: 0.8em;
      }
    </style>
    <section>
      <span
        >Settings for Demo 1 (this component will not have events, but this is
        one way to see how the css properties and html attributes will change
        the appearance of the component. Micronutrients will also be customizable but for sake of demo simplicity I ommited them.):</span
      >
      <p>
        <label for="serving">Serving:</label>
        <input type="text" name="serving"/>
      </p>
      <p>
        <label for="carbohydrates">Fat:</label>
        <input type="number" name="fat" />
      </p>
      <p>
        <label for="carbohydrates">Carbohydrates:</label>
        <input type="number" name="carbohydrates" />
      </p>
      <p>
        <label for="carbohydrates">Protein:</label>
        <input type="number" name="protein" />
      </p>
      <p>
        <label for="color">Text color: </label>
        <input type="color" name="color" value="#ffffff"/>
      </p>
      <p>
        <label for="bg-color">Background color: </label>
        <input type="color" name="bg-color" value="#ff0000"/>
      </p>
    </section>
    <h2>Demo 1 (Change via settings above)</h2>
    <nutrition-facts id="demo-1" serving="1 scoop" fat="100" carbohydrates="30" protein="45" vit-a-perc="10" vit-c-perc="0" calcium-perc="10" iron-perc="6"></nutrition-facts>
    <h2>Demo 1 Component HTML:</h2>
    <pre><code>&lt;nutrition-facts serving=&quot;1 scoop&quot; fat=&quot;100&quot; carbohydrates=&quot;30&quot; protein=&quot;45&quot; vit-a-perc=&quot;10&quot; vit-c-perc=&quot;0&quot; calcium-perc=&quot;10&quot; iron-perc=&quot;6&quot;&gt;&lt;/nutrition-facts&gt;</code></pre>
    <h2>Demo 1 FULL HTML (Shadow dom):</h2>
    <pre>
        <code>
          &lt;header&gt;
          &lt;section class=&quot;title&quot;&gt;Nutrition Facts&lt;/section&gt;
          &lt;section class=&quot;serving&quot;&gt;Serving Size 1 scoop&lt;/section&gt;
          &lt;/header&gt;
          &lt;section class=&quot;grams&quot;&gt;
              &lt;table&gt; 
                  &lt;th&gt;Amount Per Serving&lt;/th&gt;
                  &lt;th&gt;% Daily Value &lt;/th&gt;
                  &lt;tr&gt;
                      &lt;td&gt; &lt;b&gt;Calories&lt;/b&gt; &lt;span class=&quot;calories&quot;&gt; &lt;/span&gt;&lt;/td&gt;
                      &lt;td class=&quot;calories fat&quot;&gt;&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                      &lt;td&gt;&lt;b&gt;Fat&lt;/b&gt; &lt;span class=&quot;fat&quot;&gt; &lt;/span&gt;&lt;/td&gt;
                      &lt;td class=&quot;fat percentage&quot;&gt;&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                      &lt;td&gt;&lt;b&gt;Carbohydrates&lt;/b&gt; &lt;span class=&quot;carbohydrates&quot;&gt; &lt;/span&gt;&lt;/td&gt;
                      &lt;td class=&quot;carbohydrates percentage&quot;&gt;&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                      &lt;td&gt;&lt;b&gt;Protein&lt;/b&gt; &lt;span class=&quot;protein&quot;&gt; &lt;/span&gt;&lt;/td&gt;
                      &lt;td class=&quot;protein percentage&quot;&gt;&lt;/td&gt;
                  &lt;/tr&gt;
              &lt;/table&gt;
              &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;
                    Vitamin A
                    &lt;span class=&quot;vit-a&quot;&gt;10%&lt;/span&gt;
                  &lt;/td&gt;
                  &lt;td&gt;
                    Vitamin C
                    &lt;span class=&quot;vit-c&quot;&gt;0%&lt;/span&gt;
                  &lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr class=&quot;thin-end&quot;&gt;
                  &lt;td&gt;
                    Calcium
                    &lt;span class=&quot;calcium&quot;&gt;10%&lt;/span&gt;
                  &lt;/td&gt;
                  &lt;td&gt;
                    Iron
                    &lt;span class=&quot;iron&quot;&gt;6%&lt;/span&gt;
                  &lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;span&gt;The % Daily Value (DV) tells you how much a nutrient in a serving of food contributes to a daily diet. 2,000 calories a day is used for general nutrition advice.&lt;/span&gt;
          &lt;/section&gt;
        </code>
    </pre>
    <h2>The common CSS:</h2>
    <pre>
        <code>
            :root {
                --color: white;
                --bg-color: red;
              }
              article {
                display: block;
                border: 1px solid black;
                padding: 10px;
                width: 250px;
                height: 300px;
                box-sizing: border-box;
                background-color: var(--bg-color);
                color: var(--color);
              }
              .title {
                font-weight: bold;
                font-size: 1.2em;
              }
              .serving {
                font-weight: bold;
                font-size: 1em;
              }
        
              table {
                width: 100%;
                border-top: 2px solid var(--color);
              }
        
              table:nth-child(even) {
                border-bottom: 2px solid var(--color);
                margin-bottom: 18px;
              }
        
              th {
                text-align: left;
              }
        
              tr {
                margin-top: 3px;
              }
        
              tr > td {
                text-align: left;
              }
              tr > td:last-child {
                text-align: right;
              }
              .grams {
                font-size: 0.8em;
              }
        </code>
    </pre>
    <h2>Demo 1 Component JS</h2>
    <code>
      import template from "./nutritionShadowDom.js";

      class NutritionFacts extends HTMLElement {
        constructor() {
          super();
          this.attachShadow({ mode: "open" });
          this.shadowRoot.appendChild(template.content.cloneNode(true));
          this.#render();
        }
        
        #render () {
          this.shadowRoot.querySelector(".fat:not(.calories)").innerText = `${this.getAttribute(
            "fat"
          ) && this.getAttribute("fat") !== "NaN" ? this.getAttribute("fat") : 0}g`;
          this.shadowRoot.querySelector(
            ".carbohydrates"
          ).innerText = `${this.getAttribute("carbohydrates") && this.getAttribute("carbohydrates") !== "NaN" ? this.getAttribute("carbohydrates") : 0}g`;
          this.shadowRoot.querySelector(".protein").innerText = `${this.getAttribute(
            "protein"
          ) && this.getAttribute("protein") !== "NaN" ? this.getAttribute("protein") : 0}g`;
          this.shadowRoot.querySelector(".calories").innerText =
            this.getAttribute("protein") * 4 +
            this.getAttribute("carbohydrates") * 4 +
            this.getAttribute("fat") * 9;
      
          this.shadowRoot.querySelector(".vit-a").innerText = `${this.getAttribute("vit-a-perc") && this.getAttribute("vit-a-perc") !== "NaN" ? this.getAttribute("vit-a-perc") : 0}%`;
          this.shadowRoot.querySelector(".vit-c").innerText = `${this.getAttribute("vit-c-perc") && this.getAttribute("vit-c-perc") !== "NaN" ? this.getAttribute("vit-c-perc") : 0}%`;
          this.shadowRoot.querySelector(".calcium").innerText = `${this.getAttribute("calcium-perc") && this.getAttribute("calcium-perc") !== "NaN" ? this.getAttribute("calcium-perc") : 0}%`;
          this.shadowRoot.querySelector(".iron").innerText = `${this.getAttribute("iron-perc") && this.getAttribute("iron-perc") !== "NaN" ? this.getAttribute("calcium-perc") : 0}%`;
          this.shadowRoot.querySelector(".serving").innerText = `Serving Size ${this.getAttribute("serving")}`;
            
          this.shadowRoot.querySelector(".calories.fat").innerText =`From fat: ${this.getAttribute("fat") * 9 && this.getAttribute("fat") !== "NaN" ? this.getAttribute("fat") * 9 : 0}`;
          this.shadowRoot.querySelector(".carbohydrates.percentage").innerText = `${this.getAttribute("carbohydrates") !== "NaN" ? Math.round(( this.getAttribute("carbohydrates") / 275 ) * 100) : 0}%`;
          this.shadowRoot.querySelector(".fat.percentage").innerText = `${ this.getAttribute("fat") !== "NaN" ? Math.round(( this.getAttribute("fat") / 65 ) * 100) : 0}%`;
          this.shadowRoot.querySelector(".protein.percentage").innerText = `${this.getAttribute("protein") !== "NaN" ? Math.round(( this.getAttribute("protein") / 50 ) * 100) : 0}%`;
        }
      
        static get observedAttributes() {
          return ["serving", "fat", "carbohydrates", "protein", "vit-a-perc", "vit-c-perc", "calcium-perc", "iron-perc"];
        }
      
        attributeChangedCallback(name, oldValue, newValue) {
          this.#render();
        }
      
      }
      
      window.customElements.define("nutrition-facts", NutritionFacts);
      
    </code>
    <h2>Demo 1 JS for Inputs</h2>
    <code>
      const demo = document.querySelector('#demo-1');
const fat_input = document.querySelector('input[name="fat"]');
const carbs_input = document.querySelector('input[name="carbohydrates"]');
const protein_input = document.querySelector('input[name="protein"]');
const inputs = [fat_input, carbs_input, protein_input];
const color_input = document.querySelector('input[name="color"]');
const bgcolor_input = document.querySelector('input[name="bg-color"]');
const serving = document.querySelector('input[name="serving"]');
console.log(inputs);

const updateCalories = () => {
    const fat = fat_input.value;
    const carbs = carbs_input.value;
    const protein = protein_input.value;
    const calories = fat * 9 + carbs * 4 + protein * 4;
}

const percentage_map  = {"fat": 65, "carbohydrates": 275, "protein": 50};


inputs.forEach(input => {
    input.addEventListener('input', () => {
        const value = input.value;
        const value_int = parseInt(value);
        demo.setAttribute(input.name, value_int);
        updateCalories();
    });
})

color_input.addEventListener('input', () => {
    demo.style.setProperty("--color", color_input.value);
});

bgcolor_input.addEventListener('input', () => {
    demo.style.setProperty("--bg-color",bgcolor_input.value);
});

serving.addEventListener('input', () => {
   demo.setAttribute('serving', serving.value);
});
    </code>
    <h2>Differences</h2>
    The rest of the demos have minute differences in the html, where the styles are hardcoded to show how customizable the nutrition facts will be.
    <h2>Demo 2</h2>
    <nutrition-facts serving="60g" fat="12" protein="10" carbohydrates="36" style="--bg-color: blue; --color: white" vit-a-perc="12"></nutrition-facts>
    <h2>Demo 2 HTML</h2>
    <pre><code>&lt;nutrition-facts serving=&quot;60g&quot; fat=&quot;12&quot; protein=&quot;10&quot; carbohydrates=&quot;36&quot; style=&quot;--bg-color: blue; --color: white&quot; vit-a-perc=&quot;12&quot;&gt;&lt;/nutrition-facts&gt;</code></pre>
    <h2>Demo 3</h2>
    <nutrition-facts serving="34g" fat="5" protein="25" carbohydrates="4" vit-a-perc="5" vit-c-perc="1" calcium-perc="21" iron-perc="10" style="--color: black; --bg-color:white"></nutrition-facts>
    <h2>Demo 3 HTML</h2>
    <pre><code>&lt;nutrition-facts serving=&quot;34g&quot; fat=&quot;5&quot; protein=&quot;25&quot; carbohydrates=&quot;4&quot; vit-a-perc=&quot;5&quot; vit-c-perc=&quot;1&quot; calcium-perc=&quot;21&quot; iron-perc=&quot;10&quot; style=&quot;--color: black; --bg-color:white&quot;&gt;&lt;/nutrition-facts&gt;</code></pre>
    <h2>Demo 4</h2>
    <nutrition-facts serving="60g" fat="30" protein="10" carbohydrates="20" style="--bg-color: yellow; --color: black" vit-a-perc="12"></nutrition-facts>
    <h2>Demo 4 HTML</h2>
    <pre><code>&lt;nutrition-facts serving=&quot;60g&quot; fat=&quot;30&quot; protein=&quot;10&quot; carbohydrates=&quot;20&quot; style=&quot;--bg-color: yellow; --color: black&quot; vit-a-perc=&quot;12&quot;&gt;&lt;/nutrition-facts&gt;</code></pre>
    <h2>Demo 5</h2>
    <nutrition-facts serving="120g" fat="20" protein="30" carbohydrates="70" style="--bg-color: rgb(216, 0, 216); --color: white" vit-a-perc="12" vit-c-perc="1" calcium-perc="21" iron-perc="10"></nutrition-facts>
    <h2>Demo 5 HTML</h2>
    <pre><code>&lt;nutrition-facts serving=&quot;120g&quot; fat=&quot;20&quot; protein=&quot;30&quot; carbohydrates=&quot;70&quot; style=&quot;--bg-color: rgb(216, 0, 216); --color: white&quot; vit-a-perc=&quot;12&quot; vit-c-perc=&quot;1&quot; calcium-perc=&quot;21&quot; iron-perc=&quot;10&quot;&gt;&lt;/nutrition-facts&gt;</code></pre>
    <script src="index.js"></script>
    <script type="module" src="../src/nutritionFacts.js"></script>
  </body>
</html>
